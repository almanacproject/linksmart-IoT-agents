package eu.ebbits.pwal.impl.driver.wsn;

import org.osgi.service.component.ComponentContext;

import eu.ebbits.pwal.api.driver.PWALEventsDelegate;
import eu.ebbits.pwal.api.driver.PWALServicesDelegate;
import eu.ebbits.pwal.api.driver.PWALVariablesDelegate;
import eu.ebbits.pwal.api.driver.wsn.WSNDriver;
import eu.ebbits.pwal.impl.driver.PWALDriverImpl;
import eu.ebbits.pwal.impl.driver.wsn.client.UDPReceive;



public class WSNDriverImpl extends PWALDriverImpl implements WSNDriver {

    private UDPReceive client;

    public void init(ComponentContext context) {
        this.client = new UDPReceive(this);
    }

    @Override
    public void run() {
        this.client.start();
    }

    @Override
    public void stop() {
        this.client.stopReceive();
    }

    /**
     * @return the UDP port used
     */
    public int getRXPort() {
        return this.client.getRXPort();
    }

    /**
     * @param RX port used
     */
    public void setRXPort(Integer rxPort) {
        this.client.setRXPort(rxPort);
    }

    @Override
    protected PWALEventsDelegate initEventsDelegate() {
        return (PWALEventsDelegate) new WSNEventsDelegate(this);
    }

    @Override
    protected PWALServicesDelegate initServicesDelegate() {
        return (PWALServicesDelegate) new WSNServicesDelegate(this);
    }

    @Override
    protected PWALVariablesDelegate initVariablesDelegate() {
        return (PWALVariablesDelegate) new WSNVariablesDelegate(this);
    }
}