Hi,
so you would have one request that would return something like this:
http://energyportal.cnet.se/StorageManagerMdb20140604/REST/IoTEntities?typeof=water

<ArrayOfIoTEntity xmlns="http://linksmart.org/IoTEntity/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<IoTEntity prefix="geo: http://www.georss.org/georss/ almanac:http://ns.inertia.eu/ontologies xs:XMLSchema" about="569dbcad-efab-4ed6-947a-22a4765ccaa6" typeof="pwal:WaterPump">
<Name>idWaterPump</Name>
<Meta property="almanac:networkType">pwal:Serial</Meta>
</IoTEntity>
<IoTEntity prefix="inertiaontologies:http://ns.inertia.eu/ontologies xs:XMLSchema" about="WaterFlow:1" typeof="almanac:WaterFlowSensor">
<Name>Test Water Flow Sensor</Name>
<IoTProperty prefix="almanac:http://ns.almanac.eu/ontologies xs:XMLSchema" about="WaterFlow" typeof="almanac:WaterFlow" datatype="xs:double">
<Name>WaterFlow</Name>
<UnitOfMeasurement typeof="">m3/s</UnitOfMeasurement>
<IoTStateObservation>
<Value>3</Value>
<PhenomenonTime>2014-04-07T07:07:51.000Z</PhenomenonTime>
<ResultTime>2014-04-07T07:08:25.000Z</ResultTime>
</IoTStateObservation>
</IoTProperty>
</IoTEntity>
</ArrayOfIoTEntity>

From here you take the "about" attributes of the individual IoTEntities: 569dbcad-efab-4ed6-947a-22a4765ccaa6, WaterFlow:1

Then you have to individually query these IoTEntities like this:
http://energyportal.cnet.se/StorageManagerMdb20140604/REST/IoTEntities/WaterFlow:1/properties/WaterFlow/observations

<ArrayOfIoTStateObservation xmlns="http://linksmart.org/IoTEntity/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<IoTStateObservation>
<Value>3</Value>
<PhenomenonTime>2014-04-07T07:07:51.000Z</PhenomenonTime>
<ResultTime>2014-04-07T07:08:25.000Z</ResultTime>
</IoTStateObservation>
</ArrayOfIoTStateObservation>

And then aggregate from these individual requests based on phenomenontime into one aggregated plot. So its not one plot per id, but all ids are aggregated together into one plot, called 'mine'.

You can also evantually just update the plot every minute, and only summarize the measurements you had since the last request. Then you do not have to deal with aggregating every time for different intervals.

================================================


Hallo,
this is all the info I have at the moment regarding the data. I will try to get links which are more relevant for us.

http://energyportal.cnet.se/StorageManagerMdb/REST/IoTEntities?like=Coffee

To find sensors/devices by name.

http://energyportal.cnet.se/StorageManagerMdb/REST/IoTEntities/0C486748-CF2A-450C-BCF6-02AC1CB39A2D:1/Properties/PowerConsumption/observations/latest



BR,
    Mark


-------- Original Message --------
Subject:    I: ALMANAC: SCRAL available from LinkSmart?
Date:   Thu, 15 May 2014 11:47:21 +0200
From:   Giampiero Bono <bono@ismb.it>
Reply-To:   <almanac-wp7@ismb.it>
To:     <almanac-wp7@ismb.it>



Dear all,

   I’m glad to share with you the resources currently exposed by the
SCRAL. A raspberry with the SCRAL installed will be ready for your
testes asap.

*Resource*

    

*Description*

    

*Output example*

*/devices*

    

This resource retrieves the detailed list of the devices adapted by the
SCRAL, parsed as a JSON vector

    

HTTP GET devices/

[

{

    "id": "3300",

    "scralId": "bc71ffa1-20ae-4c2c-8e54-1afb80d3088f",

    "type": "scral:VehicleSpeed",

    "networkType": "scral:SmartSantander",

    "latitude": 43.44984,

    "longitude": -3.83006,

    "dateLastMeasurement": "2014-05-14 06:38:08",

    "count": 6,

    "occupancy": 2.53,

    "averageSpeed": 70.3,

    "medianSpeed": 66

}

…

]

*/devices/{deviceId}*

    

This resource retrieves details about a specific device, parsed as a JSON.

